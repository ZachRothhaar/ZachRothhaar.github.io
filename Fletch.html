<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RS Calculators</title>


  <Style>

    body 
    {
      background-color:lightslategrey;
    }

    label
    {
      font-family:'Times New Roman', Times, serif;
      font-size: 18px;
      height: 20px;
      margin-top: 10px;
      margin-left: 10px;
      text-align: right;
      margin-right:15px;
      clear: both;
      float: left;
    }

    input
    {
      height: 20px;
      width: 300px;
      border: 1px solid #000;
      margin-top: 10px;
    }

    select
    {
      font-size: 14px;
      height: 20px;
      width: 300px;
      border: 1px solid #000;
      margin-top: 10px;
    }

    .sidebar 
    {
      height: 100%;
      width: 0;
      position: fixed;
      z-index: 1;
      top: 0;
      left: 0;
      background-color: #111;
      overflow-x: hidden;
      transition: 0.5s;
      padding-top: 60px;
    }

    .sidebar a 
    {
      padding: 8px 8px 8px 32px;
      text-decoration: none;
      font-size: 25px;
      color: #818181;
      display: block;
      transition: 0.3s;
    }

    .sidebar a:hover 
    {
      color: #f1f1f1;
    }

    .sidebar .closebtn 
    {
      position: absolute;
      top: 0;
      right: 25px;
      font-size: 36px;
      margin-left: 50px;
    }

    .openbtn 
    {
      font-size: 20px;
      cursor: pointer;
      background-color: #111;
      color: white;
      padding: 10px 15px;
      border: none;
    }

    .openbtn:hover 
    {
      background-color: #444;
    }

    #main 
    {
      transition: margin-left .5s;
      padding: 16px;
    }

    @media screen and (max-height: 450px) 
    {
      .sidebar 
      {
        padding-top: 15px;
      }

      .sidebar a 
      {
        font-size: 18px;
      }
    }
  </Style>
</head>

<body>
  <div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
    <a href="#">Home</a>
    <a href="#">Fletching</a>
  </div>

  <div id="main">
    <button class="openbtn" onclick="openNav()">☰ Skills</button>

      <h2>Creation Of Arrows</h2>
      
      <div>
        <label for="runemetrics">Lookup Runemetrics Profile:</label>
        <input type="text" id="runemetrics" name="Runemetrics" size="5">
      </div>

      <button id="metricsSearchButton" onclick="FindMetrics();">Search</button>

      <div>
        <label id="logLabel" for="log">Type of Logs to Fletch:</label>
        <select name="Log" id="log">
          <option value='{"shafts":"15","xp":"5"}'> Log </option>
          <option value='{"shafts":"20","xp":"7.5"}'> Oak Log </option>
          <option value='{"shafts":"25","xp":"10"}'> Willow Log </option>
          <option value='{"shafts":"30","xp":"12.5"}'> Maple Log/Acadia Log </option>
          <option value='{"shafts":"35","xp":"15"}'> Yew Log </option>
          <option value='{"shafts":"40","xp":"17.5"}'> Magic Log </option>
          <option value='{"shafts":"45","xp":"20"}'> Elder Log </option>
        </select>
      </div>
      
      <div>
        <label for="currentShafts">Current Number of Arrow Shafts:</label>
        <input type="text" id="currentShafts" name="Current Shafts" size="5">
      </div>

      <div>
        <label for="arrowHeadType">Type of Arrowheads:</label>
        <select name="Arrowheads" id="arrowHeadType">
          <option value="0">Select ArrowHead Type</option>
          <option value="1">Bronze</option>
          <option value="2">Iron</option>
          <option value="3">Mithril</option>
          <option value="4">Adamant</option>
          <option value="5">Rune</option>
          <option value="6">Broad</option>
        </select>
      </div>
      
      <div>
        <label for="currentHeads">Current Number of Arrowheads (Must Match Type Above):</label>
        <input type="text" id="currentHeads" name="Current Arrowheads" size="5">
      </div>

      <div>
        <label for="currentLevel">Current Level (1-120):</label>
        <input type="number" id="currentLevel" name="Current Shafts" value="1" size="3" min="1" max="120" onkeyup="forceMinMax(this)">
      </div>

      <div>
        <label for="targetLevel">Target Level (1-120):</label>
        <input type="number" id="targetLevel" name="Target Level" value="1" size="3" min="1" max="120" onkeyup="forceMinMax(this)">
      </div>

      <button id="calculateButton" onclick="CalcFletching();">Calculate</button>
  </div><!--End Of Main Div-->
</body>

<script>
  var XPTarget = 1300000;

  function openNav() 
  {
    document.getElementById("mySidebar").style.width = "250px";
    document.getElementById("main").style.marginLeft = "250px";
  }

  function closeNav() 
  {
    document.getElementById("mySidebar").style.width = "0";
    document.getElementById("main").style.marginLeft = "0";
  }

  function forceMinMax(num)
  {
    if (parseInt(num.value) < parseInt(num.min))
    {
      num.value = num.min;
    }
    if (parseInt(num.value) > parseInt(num.max))
    {
      num.value = num.max;
    }
  }

  async function FindMetrics()
  {
    var name = document.getElementById('runemetrics').value;

    var response = await fetch('https://apps.runescape.com/runemetrics/profile/profile?user=' + name + '&activities=20').then(res => res.json());
  }

  function CalcFletching()
  {
    var logInfo = JSON.parse(document.getElementById('log').value);
    var shaftsPerLog = logInfo.shafts;
    var xpPerLog = logInfo.xp;
    
    var currentShafts = document.getElementById('currentShafts').value;

    var XPPerShaftMade = 5;
    var QuantityOfShaftsMade = 0;
    var Feathers = 15;
    var TypeOfArrows = "";
    var XPFromTypeOfArrows = 221.5;

    var XPOutfitBonus = 0;

    var TargetLevel = 1;

    var TimeCost = 0;
    var GPCost = 0;
    var Answer = 0;
    var AmountOfActions = 0;

    var CurrentLevel = document.getElementById('CurrLevel');
    var currLvl = CurrentLevel.options[CurrentLevel.selectedIndex].innerHTML;

    var LvlTarget = document.getElementById('LVLTarget');
    var TargetLvl = LvlTarget.options[LvlTarget.selectedIndex].innerHTML;

    alert(currLvl);
    alert(TargetLvl);


    AmountOfActions = XPTarget/(XPFromTypeOfArrows + XPPerShaftMade + Feathers); //BXP needs calculated


    Answer = AmountOfActions * 15;
    alert(Answer.toFixed(3) + " Required Arrow heads");

  }
</script>

</html>